<!DOCTYPE html>
<html lang="en">

<style>
body {
    background-image: url('../static/wallpaper/pickle_wall.jpg');
}

</style>

<head>

    <title>{{ title }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>

<body>

        {% for img in pickles %}
        <div>
            <img src="{{ img }}" id="{{ img }}">
        </div>
        {% endfor %}


    <img id="play_link" src="..\static\play_button.png" onclick="setInterval(play_button, 2000)">

    <audio id="pickle_audio_1" src="..\static\pickle_audio\trenton_pickle_1.mp3">
    </audio>
    
    <audio id="pickle_audio_2" src="..\static\pickle_audio\trenton_pickle_2.mp3">
    </audio>

    {% block javascript %}
        <script type="text/javascript">

            window.onload = function start() {
                display();
            }

            function display() {
                var img_id_list = {{ pickles | tojson }};
                window.setInterval(function() {
                    for (i = 0; i < img_id_list.length; i++)
                    {
                        var image = document.getElementById(img_id_list[i]);
                        console.log(image);
                        var x = image.style.left;
                        var y = image.style.top;
                        //console.log( "left: " + x + " top: " + y)

                        document.getElementById(img_id_list[i]).style.left=(x+10) + "px"; //horizontal move
                        document.getElementById(img_id_list[i]).style.top=(y+10) + "px"; // vertical movment
                        
                        // wrap x and y if they go outside the screen bounds
                        //if ()
                    }
                }, 1000); // Repeat every 1 second
            }

            function play_button() {
                console.log({{ sound_files|safe }});
                var sound_files = {{ sound_files|safe }};
                console.log(sound_files);

                n = Math.floor(Math.random() * sound_files.length);

                var audio_element = document.createElement("audio")
                audio_element.setAttribute("id", "pickle_audio")
                audio_element.setAttribute("src", sound_files[n])
                document.body.appendChild(audio_element)
                console.log(audio_element)

                // var audio = document.getElementById("pickle_audio");
                // console.log(audio)
                audio_element.play();
            }
        </script>
    {% endblock %}

</body>


</html>